<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini E-Commerce Portal</title>
  <style>
    :root{--accent:#0b72ff;--muted:#666;--bg:#f6f8fb;--card:#fff}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial; margin:0;background:var(--bg);color:#111}
    header{background:linear-gradient(90deg,#ffffffcc,#eef6ff);padding:12px 20px;display:flex;align-items:center;justify-content:space-between;gap:20px;position:sticky;top:0;z-index:10;border-bottom:1px solid #e6eefc}
    .brand{display:flex;align-items:center;gap:10px}
    .brand h1{font-size:18px;margin:0;color:var(--accent)}
    nav{display:flex;gap:8px}
    .nav-btn{background:transparent;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    .nav-btn:hover{background:#eef4ff}
    main{padding:20px;max-width:1100px;margin:0 auto}
    .layout{display:grid;grid-template-columns:1fr 320px;gap:18px}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(12,30,80,0.06)}
    .product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .product{display:flex;flex-direction:column;gap:8px}
    .product img{width:100%;height:150px;object-fit:cover;border-radius:8px}
    .product h3{margin:0;font-size:15px}
    .product .price{font-weight:700;color:var(--accent)}
    .btn{background:var(--accent);color:#fff;border:none;padding:8px 10px;border-radius:8px;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid #dfeeff}
    form{display:flex;flex-direction:column;gap:8px}
    input,select,textarea{padding:10px;border-radius:8px;border:1px solid #e6eefc}
    .small{font-size:13px;color:var(--muted)}
    .list{display:flex;flex-direction:column;gap:8px}
    .list-item{display:flex;gap:10px;align-items:center}
    .badge{background:#eef6ff;color:var(--accent);padding:4px 8px;border-radius:8px;font-size:13px}
    footer{padding:18px;text-align:center;color:var(--muted);font-size:13px}
    /* responsive */
    @media(max-width:880px){.layout{grid-template-columns:1fr}header{flex-direction:column;align-items:flex-start}nav{flex-wrap:wrap}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <svg width="36" height="36" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="6" fill="var(--accent)"/><path d="M7 12h10M7 8h10M7 16h6" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <h1>ShopEasy — Mini E‑Commerce</h1>
      <div class="badge small" style="margin-left:8px">Demo</div>
    </div>
    <nav>
      <button class="nav-btn" data-view="home">Home</button>
      <button class="nav-btn" data-view="products">Products</button>
      <button class="nav-btn" data-view="contact">Contact Us</button>
      <button class="nav-btn" data-view="about">About Us</button>
      <button id="open-login" class="nav-btn">Login / Register</button>
      <button id="view-wishlist" class="nav-btn">Wishlist (<span id="wl-count">0</span>)</button>
      <button id="view-orders" class="nav-btn">Orders (<span id="orders-count">0</span>)</button>
    </nav>
  </header>

  <main>
    <div id="app" class="layout">
      <section id="main-content">
        <!-- dynamic content loaded here -->
      </section>

      <aside>
        <div class="card">
          <h3>Search & Filters</h3>
          <input id="search" placeholder="Search products..." />
          <div style="display:flex;gap:8px;margin-top:10px">
            <select id="sort">
              <option value="default">Sort: Featured</option>
              <option value="price-asc">Price: Low → High</option>
              <option value="price-desc">Price: High → Low</option>
            </select>
            <button id="clear-filters" class="btn ghost">Clear</button>
          </div>
          <hr style="margin:10px 0"/>
          <h4>Customer Care</h4>
          <p class="small">Have an issue? Send us a quick message.</p>
          <form id="customer-care">
            <input required name="cc-name" placeholder="Your name" />
            <input required name="cc-email" placeholder="Email" />
            <textarea name="cc-message" rows="3" placeholder="Describe the issue"></textarea>
            <button class="btn" type="submit">Send</button>
          </form>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Reporting & Feedback</h3>
          <p class="small">Report product issues or abusive reviews.</p>
          <form id="report-form">
            <select name="report-type">
              <option value="product">Product defect</option>
              <option value="review">Review abuse</option>
              <option value="other">Other</option>
            </select>
            <input name="report-item" placeholder="Product / Review ID (optional)" />
            <textarea name="report-msg" rows="3" placeholder="Details (required)"></textarea>
            <button class="btn" type="submit">Report</button>
          </form>
        </div>
      </aside>
    </div>
  </main>

  <footer>
    © <span id="year"></span> ShopEasy — This is a student/demo project. All actions are local to your browser (no server required).
  </footer>

  <!-- LOGIN/REGISTER MODAL -->
  <div id="modal" style="position:fixed;inset:0;background:rgba(2,6,23,0.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:40">
    <div class="card" style="max-width:920px;width:100%;display:grid;grid-template-columns:1fr 1fr;gap:12px">
      <div style="padding:12px">
        <h3>Register</h3>
        <form id="register-form">
          <input name="name" placeholder="Full name" required />
          <input name="email" placeholder="Email" required />
          <input name="phone" placeholder="Phone (optional)" />
          <input name="password" placeholder="Password (min 6 chars)" type="password" required />
          <input name="confirm" placeholder="Confirm password" type="password" required />
          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" type="submit">Create account</button>
            <button type="button" id="close-modal" class="btn ghost">Close</button>
          </div>
        </form>
      </div>
      <div style="padding:12px">
        <h3>Login</h3>
        <form id="login-form">
          <input name="email" placeholder="Email" required />
          <input name="password" placeholder="Password" type="password" required />
          <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
            <button class="btn">Login</button>
            <button id="guest-login" class="btn ghost" type="button">Continue as Guest</button>
          </div>
          <p class="small" style="margin-top:8px">Validation: email must be valid; password min 6 chars. Accounts are stored in browser localStorage for demo.</p>
        </form>
      </div>
    </div>
  </div>

  <script>
  // ---------- Sample data ----------
  const sampleProducts = [
  {
    id: 'p1',
    title: 'Wireless Headphones',
    price: 2499,
    img: 'https://m.media-amazon.com/images/I/61CGHv6kmWL._SX679_.jpg',
    description: 'High quality sound'
  },
  {
    id: 'p2',
    title: 'Monitor',
    price: 3499,
    img: 'https://m.media-amazon.com/images/I/71rXSVqET9L._SX679_.jpg',
    description: 'RGB backlit, tactile switches'
  },
  {
    id: 'p3',
    title: 'Gaming Mouse',
    price: 1299,
    img: 'https://m.media-amazon.com/images/I/61mpMH5TzkL._SX679_.jpg',
    description: 'Ergonomic & fast'
  },
];


  // ---------- Utilities ----------
  const $ = (sel, root = document) => root.querySelector(sel);
  const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));
  function save(key, val){localStorage.setItem(key, JSON.stringify(val))}
  function load(key, fallback){try{const v=JSON.parse(localStorage.getItem(key));return v===null?fallback:v}catch(e){return fallback}}
  function formatINR(n){return '₹'+(n).toLocaleString('en-IN')}

  // ---------- App state ----------
  const state = {
    products: sampleProducts.slice(),
    search: '',
    sort: 'default',
    wishlist: load('wishlist', []),
    orders: load('orders', []),
    reviews: load('reviews', {}), // {productId: [{id, user, text, rating}]}
    users: load('users', []),
    session: load('session', null),
  }

  // ---------- DOM refs ----------
  const mainContent = $('#main-content');
  const yearEl = $('#year'); yearEl.textContent = new Date().getFullYear();
  const modal = $('#modal');
  const wlCount = $('#wl-count');
  const ordersCount = $('#orders-count');
  updateCounts();

  // ---------- Navigation ----------
  function showView(view){
    if(view === 'home') renderHome();
    else if(view === 'products') renderProducts();
    else if(view === 'contact') renderContact();
    else if(view === 'about') renderAbout();
  }

  document.querySelectorAll('.nav-btn[data-view]').forEach(b=>b.addEventListener('click', e=>showView(e.currentTarget.dataset.view)));
  document.getElementById('open-login').addEventListener('click', ()=>modal.style.display='flex');
  document.getElementById('close-modal').addEventListener('click', ()=>modal.style.display='none');
  document.getElementById('guest-login').addEventListener('click', ()=>{state.session={guest:true,name:'Guest'}; save('session',state.session); modal.style.display='none'; alert('Signed in as Guest');});
  document.getElementById('view-wishlist').addEventListener('click', renderWishlist);
  document.getElementById('view-orders').addEventListener('click', renderOrders);

  // Search and sort
  $('#search').addEventListener('input', e=>{state.search=e.target.value; renderProducts()});
  $('#sort').addEventListener('change', e=>{state.sort=e.target.value; renderProducts()});
  $('#clear-filters').addEventListener('click', ()=>{state.search='';$('#search').value='';state.sort='default';$('#sort').value='default';renderProducts()});

  // Customer care
  $('#customer-care').addEventListener('submit', e=>{e.preventDefault();const f=new FormData(e.target);alert('Message sent. Thank you, '+f.get('cc-name'));e.target.reset();});
  $('#report-form').addEventListener('submit', e=>{e.preventDefault();const f=new FormData(e.target);alert('Report submitted. Thank you.');e.target.reset();});

  // Register
  $('#register-form').addEventListener('submit', e=>{
    e.preventDefault();const fm=new FormData(e.target);
    const name=fm.get('name').trim(), email=fm.get('email').trim().toLowerCase(), phone=fm.get('phone').trim(), pwd=fm.get('password'), confirm=fm.get('confirm');
    if(!validateEmail(email)){return alert('Enter a valid email')}
    if(pwd.length<6) return alert('Password must be at least 6 characters');
    if(pwd!==confirm) return alert('Passwords do not match');
    if(state.users.find(u=>u.email===email)) return alert('Account with this email already exists');
    state.users.push({id:'u'+Date.now(),name,email,phone,password:pwd});
    save('users',state.users);
    alert('Account created — you can login now');
    e.target.reset();
  });

  // Login
  $('#login-form').addEventListener('submit', e=>{
    e.preventDefault();const fm=new FormData(e.target);const email=fm.get('email').trim().toLowerCase(), pwd=fm.get('password');
    if(!validateEmail(email)) return alert('Enter valid email');
    if(pwd.length<6) return alert('Password must be at least 6 characters');
    const user = state.users.find(u=>u.email===email && u.password===pwd);
    if(!user) return alert('Invalid credentials');
    state.session = {id:user.id, name:user.name, email:user.email}; save('session',state.session);
    alert('Logged in as '+user.name);
    modal.style.display='none';
  });

  function validateEmail(e){return /^\S+@\S+\.\S+$/.test(e)}

  // ---------- Rendering ----------
  function renderHome(){
    mainContent.innerHTML = `
      <div class="card">
        <h2>Welcome to ShopEasy</h2>
        <p class="small">A minimal demo e-commerce portal built with HTML/CSS/JS. Use the Products section to browse items, add to wishlist, or place an order.</p>
      </div>
      <div class="card" style="margin-top:12px">
        <h3>Top Products</h3>
        <div class="product-grid" id="home-grid"></div>
      </div>
    `;
    const grid = $('#home-grid'); sampleProducts.slice(0,4).forEach(p=>{const el=document.createElement('div');el.className='product card';el.innerHTML=`<img src="${p.img}" alt="${p.title}"/><h3>${p.title}</h3><div class="price">${formatINR(p.price)}</div><div style="display:flex;gap:8px;margin-top:8px"><button class="btn" data-add="${p.id}">Buy</button><button class="btn ghost" data-wl="${p.id}">Wishlist</button></div>`;grid.appendChild(el)});
    grid.querySelectorAll('[data-add]').forEach(b=>b.addEventListener('click', e=>placeOrder(e.currentTarget.dataset.add)));
    grid.querySelectorAll('[data-wl]').forEach(b=>b.addEventListener('click', e=>toggleWishlist(e.currentTarget.dataset.wl)));
  }

  function renderProducts(){
    const q = state.search.toLowerCase();
    let list = state.products.filter(p=>p.title.toLowerCase().includes(q)||p.description.toLowerCase().includes(q));
    if(state.sort==='price-asc') list.sort((a,b)=>a.price-b.price);
    if(state.sort==='price-desc') list.sort((a,b)=>b.price-a.price);

    mainContent.innerHTML = `<div class=\"card\"><h2>Products</h2><div class=\"product-grid\" id=\"prod-grid\"></div></div>`;
    const grid = $('#prod-grid');
    list.forEach(p=>{
      const node = document.createElement('div'); node.className='product card';
      node.innerHTML = `<img src="${p.img}" alt="${p.title}"/><h3>${p.title}</h3><div class="small">${p.description}</div><div class="price">${formatINR(p.price)}</div><div style="display:flex;gap:8px;margin-top:6px"><button class="btn" data-buy="${p.id}">Buy</button><button class="btn ghost" data-wl="${p.id}">Wishlist</button><button class="btn ghost" data-view="${p.id}">Details</button></div></div>`;
      grid.appendChild(node);
    });
    grid.querySelectorAll('[data-wl]').forEach(b=>b.addEventListener('click', e=>toggleWishlist(e.currentTarget.dataset.wl)));
    grid.querySelectorAll('[data-buy]').forEach(b=>b.addEventListener('click', e=>placeOrder(e.currentTarget.dataset.buy)));
    grid.querySelectorAll('[data-view]').forEach(b=>b.addEventListener('click', e=>renderProductDetails(e.currentTarget.dataset.view)));
  }

  function renderProductDetails(id){
    const p = state.products.find(x=>x.id===id); if(!p) return alert('Product not found');
    const existingReviews = state.reviews[id]||[];
    mainContent.innerHTML = `
      <div class="card">
        <div style="display:flex;gap:16px;align-items:flex-start">
          <img src="${p.img}" style="width:320px;height:220px;object-fit:cover;border-radius:8px"/>
          <div>
            <h2>${p.title}</h2>
            <div class="price">${formatINR(p.price)}</div>
            <p class="small">${p.description}</p>
            <div style="display:flex;gap:8px;margin-top:8px"><button class="btn" id="buy-now">Buy Now</button><button class="btn ghost" id="to-wl">Add to Wishlist</button></div>
          </div>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <h3>Reviews</h3>
        <div id="reviews-list"></div>
        <form id="add-review" style="margin-top:8px">
          <input name="author" placeholder="Your name" required />
          <select name="rating"><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option></select>
          <textarea name="text" rows="3" placeholder="Write a review" required></textarea>
          <button class="btn" type="submit">Submit Review</button>
        </form>
      </div>
    `;
    $('#buy-now').addEventListener('click', ()=>placeOrder(id));
    $('#to-wl').addEventListener('click', ()=>toggleWishlist(id));
    const rlist = $('#reviews-list');
    (existingReviews).forEach(r=>{const d=document.createElement('div');d.className='list-item';d.innerHTML=`<div style="flex:1"><strong>${escapeHtml(r.user)}</strong> <span class="small">(Rating: ${r.rating})</span><div class="small">${escapeHtml(r.text)}</div></div>`;rlist.appendChild(d)});
    $('#add-review').addEventListener('submit', e=>{e.preventDefault();const f=new FormData(e.target);const author=f.get('author').trim(), text=f.get('text').trim(), rating=f.get('rating'); if(!author||!text) return alert('Please fill name and review'); const rv={id:'r'+Date.now(),user:author,text,rating:Number(rating)}; state.reviews[id]=state.reviews[id]||[];state.reviews[id].push(rv); save('reviews',state.reviews); alert('Review submitted'); renderProductDetails(id);});
  }

  function renderWishlist(){
    const items = state.wishlist.map(id=>state.products.find(p=>p.id===id)).filter(Boolean);
    mainContent.innerHTML = `<div class=\"card\"><h2>Your Wishlist</h2><div id=\"wl-list\"></div></div>`;
    const list = $('#wl-list');
    if(items.length===0) list.innerHTML='<p class="small">No items in wishlist.</p>';
    items.forEach(p=>{const node=document.createElement('div');node.className='list-item card';node.innerHTML=`<img src="${p.img}" style="width:70px;height:60px;object-fit:cover;border-radius:6px"/><div style="flex:1"><strong>${p.title}</strong><div class="small">${formatINR(p.price)}</div></div><div style="display:flex;gap:8px"><button class="btn" data-buy="${p.id}">Buy</button><button class="btn ghost" data-remove="${p.id}">Remove</button></div>`;list.appendChild(node)});
    list.querySelectorAll('[data-remove]').forEach(b=>b.addEventListener('click', e=>{toggleWishlist(e.currentTarget.dataset.remove)}));
    list.querySelectorAll('[data-buy]').forEach(b=>b.addEventListener('click', e=>placeOrder(e.currentTarget.dataset.buy)));
  }

  function renderOrders(){
    mainContent.innerHTML = `<div class=\"card\"><h2>Your Orders</h2><div id=\"orders-list\"></div></div>`;
    const ol = $('#orders-list'); const ord = state.orders; if(ord.length===0) ol.innerHTML='<p class="small">No orders placed yet.</p>';
    ord.slice().reverse().forEach(o=>{const p = state.products.find(x=>x.id===o.pid); const node=document.createElement('div'); node.className='list-item card'; node.innerHTML=`<img src="${p.img}" style="width:70px;height:60px;object-fit:cover;border-radius:6px"/><div style="flex:1"><div><strong>${p.title}</strong></div><div class="small">Order ID: ${o.id} • ${new Date(o.date).toLocaleString()}</div></div><div><div class="badge">${o.status}</div></div>`; ol.appendChild(node);});
  }

  function renderContact(){ mainContent.innerHTML = `<div class="card"><h2>Contact Us</h2><p class="small">Email: support@shopeasy.demo • Phone: +91-00000-00000</p><h3 style="margin-top:12px">Send message</h3><form id="contact-form"><input name="name" placeholder="Your name" required/><input name="email" placeholder="Email" required/><textarea name="msg" rows="4" placeholder="Message" required></textarea><button class="btn" type="submit">Send</button></form></div>`; $('#contact-form').addEventListener('submit', e=>{e.preventDefault();alert('Message sent — we will contact you soon');e.target.reset();}); }
  function renderAbout(){ mainContent.innerHTML = `<div class="card"><h2>About ShopEasy</h2><p class="small">This is a demonstration e-commerce portal built for learning and testing form validation, client-side storage, and UI interactions. No server involved — everything runs in the browser.</p></div>` }

  // ---------- Actions ----------
  function toggleWishlist(id){ const idx = state.wishlist.indexOf(id); if(idx>=0){state.wishlist.splice(idx,1);}else{state.wishlist.push(id);} save('wishlist',state.wishlist); updateCounts(); alert(state.wishlist.indexOf(id)>=0? 'Added to wishlist' : 'Removed from wishlist'); renderWishlist(); }

  function placeOrder(pid){ const product = state.products.find(p=>p.id===pid); if(!product) return alert('Product not found'); const ord = {id:'o'+Date.now(),pid, price:product.price, date:Date.now(), status:'Processing'}; state.orders.push(ord); save('orders',state.orders); updateCounts(); alert('Order placed! Order ID: '+ord.id); renderOrders(); }

  function updateCounts(){ wlCount.textContent = state.wishlist.length; ordersCount.textContent = state.orders.length }

  function escapeHtml(s){ return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;') }

  // initial view
  showView('home');

  // expose some functions for debugging (optional)
  window._app = {state, renderProducts, renderHome, renderWishlist, renderOrders};
  </script>
</body>
</html>
